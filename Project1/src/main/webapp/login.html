<!DOCTYPE html>
<html>
    <head>
        <meta charset="ISO-8859-1">
        <title>Log In</title>
    </head>
    <body>
        <h1>Test Log in Page</h1>
        
        <a id="requestsPage" href="http://localhost:8080/Project1/makeRequest.html"></a>

        <h3>Username</h3>
        <input id="username" type="text">

        <h3>Password</h3>
        <input id="password" type="text">

        <button onclick="login()">Sign In</button>

        <p id="welcome"></p>
    </body>
    <script>
        function login() {
            let username = document.getElementById("username").value;
            let password = document.getElementById("password").value;

            let xhttp = new XMLHttpRequest();

            xhttp.onreadystatechange = function () {
                console.log(this.status);
                if(this.readyState == 4 && this.status == 200) {
                    let user = JSON.parse(this.responseText);

                    let userInfo = `<h3>Hello ${user.firstname} ${user.lastname}</h3>`;
                
                    document.getElementById("welcome").innerHTML = userInfo;

                    // hide until now
                    document.getElementById("requestsPage").innerHTML = "Make a Request";
                }
            }

            xhttp.open("GET", "http://localhost:8080/Project1/login.do?username=" + username + "&password=" + password, true);
            xhttp.send();
        }
    </script>
</html>